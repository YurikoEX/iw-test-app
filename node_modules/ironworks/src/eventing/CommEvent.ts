
import _ = require('lodash');

import Event = require('./Event');

import ICommEvent = require('../../interfaces/eventing/ICommEvent');
import ICommEventData = require('../../interfaces/eventing/ICommEventData');

class CommEvent extends Event implements ICommEvent {
    prefix: string;
    service: string;
    method: string;
    worker: string;

    constructor(data: ICommEventData) {
        super(data);
        this.prefix = data.prefix;
        this.service = data.service;
        this.method = data.method;
        this.worker = data.worker;
    }

    public getText(): string {
        return _.compact([
            this.prefix,
            this.service,
            this.method,
            this.worker,
            this.name
        ]).join('.');
    }
}

export = CommEvent;
